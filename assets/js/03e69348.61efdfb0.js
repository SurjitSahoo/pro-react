"use strict";(self.webpackChunkpro_react=self.webpackChunkpro_react||[]).push([[4661],{4493:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"performance/how-to-think-about-use-effect","title":"How to think about useEffect","description":"useDefect or useFootGun \ud83e\uddb6\ud83c\udffc\ud83d\udd2b","source":"@site/docs/4.performance/4.how-to-think-about-use-effect.md","sourceDirName":"4.performance","slug":"/performance/how-to-think-about-use-effect","permalink":"/pro-react/docs/performance/how-to-think-about-use-effect","draft":false,"unlisted":false,"editUrl":"https://github.com/SurjitSahoo/pro-react/edit/main/docs/4.performance/4.how-to-think-about-use-effect.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"slug":"how-to-think-about-use-effect","title":"How to think about useEffect"},"sidebar":"tutorialSidebar","previous":{"title":"useEffect is Dangerous! \ud83e\udde8\ud83d\udca3","permalink":"/pro-react/docs/performance/use-effect-is-dangerous"}}');var s=t(4848),c=t(8453);const i={sidebar_position:4,slug:"how-to-think-about-use-effect",title:"How to think about useEffect"},r="How to think about useEffect?",a={},u=[{value:"<code>useDefect</code> or <code>useFootGun</code> \ud83e\uddb6\ud83c\udffc\ud83d\udd2b",id:"usedefect-or-usefootgun-",level:2},{value:"React 18 made it clear",id:"react-18-made-it-clear",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsxs)(n.h1,{id:"how-to-think-about-useeffect",children:["How to think about ",(0,s.jsx)(n.code,{children:"useEffect"}),"?"]})}),"\n",(0,s.jsxs)(n.h2,{id:"usedefect-or-usefootgun-",children:[(0,s.jsx)(n.code,{children:"useDefect"})," or ",(0,s.jsx)(n.code,{children:"useFootGun"})," \ud83e\uddb6\ud83c\udffc\ud83d\udd2b"]}),"\n",(0,s.jsxs)(n.p,{children:["Yes, I'm not kidding, useEffect can produce hard-to-understand, un-maintainable, unpredictable code. Chained useEffects can also produce cascading chain reactions of unpredictability if not used properly. ",(0,s.jsx)(n.strong,{children:"In most cases, you do not need useEffect, it can be handled with event driven approach."})]}),"\n",(0,s.jsx)(n.p,{children:"But that doesn't mean there's no use of useEffect. It's primary use is to handle subscriptions. When the component mounts you want to subscribe to some-stuff, and then when the component un-mounts, you cleanup the subscriptions."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Think of useEffect as ",(0,s.jsx)(n.code,{children:"useSynchronize"})]})}),"\n",(0,s.jsx)(n.p,{children:"Imagine you're watching TV, if you change channels, the content of that TV channel doesn't stop coming, You just don't care about that content anymore, that's all. useEffect helps you subscribe to the desired channel, consume content and when you're done, you can unsubscribe."}),"\n",(0,s.jsx)(n.h3,{id:"react-18-made-it-clear",children:"React 18 made it clear"}),"\n",(0,s.jsx)(n.p,{children:"In React 18, the following code will run twice, not once!"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",metastring:'showLineNumbers title="BAD \ud83d\udca9\ud83e\udde8\ud83d\udca3"',children:"function App() {\n  // ...\n\n  useEffect(() => {\n    authenticate();\n  }, []);\n\n  // ...\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["It's react's way of telling you, you're not using ",(0,s.jsx)(n.code,{children:"useEffect"})," as intended!"]}),"\n",(0,s.jsx)(n.li,{children:"Your components must be robust to component updates and mounts."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",metastring:'showLineNumbers title="Hack | Workaround"',children:"let initialized = false;\n\nfunction App() {\n  //...\n\n  useEffect(() => {\n    if (!initialized) {\n      initialized = true;\n      authenticate();\n    }\n  }, []);\n\n  // ...\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",metastring:'showLineNumbers title="Or just remove the useEffect all-together \u2705"',children:"// If you're using Next.JS check you're running in browser\nif (typeof window !== 'undefined') {\n  // \u2705 Only runs once per app load\n  authenticate();\n}\n\nfunction App() {\n  //...\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(6540);const s={},c=o.createContext(s);function i(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);