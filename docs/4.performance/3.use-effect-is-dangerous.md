---
sidebar_position: 3
slug: use-effect-is-dangerous
---

# `useEffect` is Dangerous!

:::danger
Always avoid using `useEffect` if you have any alternate solution.
:::

:::info Remember
It runs only after the commit phase, i.e after the re-render changes have been committed to the DOM.
:::

## Common pitfalls

### Don't use it to update the local state if the props change.

```jsx title="DON'T ðŸ’©ðŸ’£"
function Message({ msg }) {
  const [msgState, setMsgState] = useState(msg);

  useEffect(() => setMsgState(msg), [msg]);

  return <div>{msgState}</div>;
}
```

- When the `msg` prop changes from parent, it'll call the `<Message/>` component function again passing the new updated `msg` (re-render triggered).
- Then Message component will re-render by re-calculating the changes in the UI elements, and commit the changes to the browser. Only after that, your `useEffect` will run, setting the new msg in the state. That will again trigger re-render. But you already got the updated msg in previous render, you do not need another re-render!!

```jsx title="DO âœ…"
function Message({ msg }) {
  return <div>{msg}</div>;
}
```
